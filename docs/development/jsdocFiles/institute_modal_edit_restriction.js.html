<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: institute_modal_edit_restriction.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: institute_modal_edit_restriction.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>
/**
 * 
 */
function trackRestrictionChange(parent, value) {
    let key = parent['id'];
    let restriction_id = parent['parentElement'];
    setRestrictionChange(key, value, restriction_id['id']);
}

function setRestrictionChange(key, value, id) {
    let updatedRestrictions;
    let sessionKey;
    if (id.includes('new') === true) {
        updatedRestrictions = JSON.parse(sessionStorage.getItem('newRestrictions'));
        sessionKey = 'newRestrictions';
        updatedRestrictions.forEach(obj => {
            console.log(obj['restriction_ID']);
            if (obj['restriction_ID'] == id) {
                obj[key] = value;
            }
        });
    }
    else {
        updatedRestrictions = JSON.parse(sessionStorage.getItem('updatedRestrictions'));
        sessionKey = 'updatedRestrictions';
        updatedRestrictions.forEach(obj => {
            if (obj[1]['restriction_ID'] == id) {
                obj[1][key] = value;
            }
        });
    }
    console.log(updatedRestrictions);
    sessionStorage.setItem(sessionKey, JSON.stringify(updatedRestrictions));
}


function newRestriction() {
    let restCounter = 0;
    if (!('newRestrictCounter' in sessionStorage)) {
        sessionStorage.setItem('newRestrictCounter', JSON.stringify(restCounter));
    }
    else {
        restCounter = JSON.parse(sessionStorage.getItem('newRestrictCounter'));
    }
    const new_rest = {};
    new_rest['mobility_agreement_ID'] = sessionStorage.getItem('currentAgID');
    const input = Array.from($('#input-new-restriction').children('input, select'));
    input.forEach(child => {
        if (child.name === 'incoming') {
            new_rest[child.name] = $('#'+child.id).prop('checked') ? 1 : 0;
        }
        else {
            new_rest[child.name] = child.value;
        }
    });
    new_rest['restriction_ID'] = `new_${restCounter}`;
    const restrictions = 'newRestrictions' in sessionStorage ? JSON.parse(sessionStorage.getItem('newRestrictions')) : [];
    sessionStorage.setItem('newRestrictCounter', JSON.stringify(Number(restCounter)+1));
    restrictions.push(new_rest);
    insertRestriction([sessionStorage.getItem('currentAgID'), new_rest]);
    sessionStorage.setItem('newRestrictions', JSON.stringify(restrictions));
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#addButtonEvent">addButtonEvent</a></li><li><a href="global.html#addFilterChangeEvents">addFilterChangeEvents</a></li><li><a href="global.html#addNewRestToNewAg">addNewRestToNewAg</a></li><li><a href="global.html#agreementFilter">agreementFilter</a></li><li><a href="global.html#checkIfNew">checkIfNew</a></li><li><a href="global.html#checkIfUpdated">checkIfUpdated</a></li><li><a href="global.html#checkInput">checkInput</a></li><li><a href="global.html#checkNewRestForNewAgreement">checkNewRestForNewAgreement</a></li><li><a href="global.html#checkProp">checkProp</a></li><li><a href="global.html#clearSessionStorage">clearSessionStorage</a></li><li><a href="global.html#createAgreementObject">createAgreementObject</a></li><li><a href="global.html#createDifferenceArray">createDifferenceArray</a></li><li><a href="global.html#createObjectInstitute">createObjectInstitute</a></li><li><a href="global.html#createRestriction">createRestriction</a></li><li><a href="global.html#functionalityAgreementFilter">functionalityAgreementFilter</a></li><li><a href="global.html#getCountries">getCountries</a></li><li><a href="global.html#insertAgreementInTable">insertAgreementInTable</a></li><li><a href="global.html#insertCountries">insertCountries</a></li><li><a href="global.html#insertFac">insertFac</a></li><li><a href="global.html#instituteObjectUpdated">instituteObjectUpdated</a></li><li><a href="global.html#loadAgreements">loadAgreements</a></li><li><a href="global.html#loadMentorDropdown">loadMentorDropdown</a></li><li><a href="global.html#loadModal">loadModal</a></li><li><a href="global.html#makeRowClickable">makeRowClickable</a></li><li><a href="global.html#modalButtonEvents">modalButtonEvents</a></li><li><a href="global.html#modalEvents">modalEvents</a></li><li><a href="global.html#postData">postData</a></li><li><a href="global.html#setChanged">setChanged</a></li><li><a href="global.html#setupFilter">setupFilter</a></li><li><a href="global.html#showGuidedAgreements">showGuidedAgreements</a></li><li><a href="global.html#trackAgreementChange">trackAgreementChange</a></li><li><a href="global.html#trackPartnershipType">trackPartnershipType</a></li><li><a href="global.html#trackRestrictionChange">trackRestrictionChange</a></li><li><a href="global.html#updateChangedAgreement">updateChangedAgreement</a></li><li><a href="global.html#validateForm">validateForm</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Mon Jun 20 2022 18:57:30 GMT+0200 (Mitteleurop√§ische Sommerzeit)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
